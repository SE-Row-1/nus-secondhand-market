#!/bin/bash

# List of services
services=("account" "item" "notification" "wishlist" "web")

# Loop through each service
for service in "${services[@]}"; do
  echo "Building and pushing Docker image for $service..."

  # Build the Docker image with two tags
  docker build -t z1yoon/nshm-${service}:latest \
               --build-arg NEXT_PUBLIC_API_BASE_URL=${NEXT_PUBLIC_API_BASE_URL} \
               ./services/${service}

  # Push both tags
  docker push z1yoon/nshm-${service}:${GITHUB_SHA}
  docker push z1yoon/nshm-${service}:latest

  echo "$service Docker image pushed!"
done

